# Работа с файлами и ссылками

## Структура Linux

Структура файлов в Linux системах выглядит следующим образом

![filesys](/img/filesystem.png "Файловая система")

В папках **bin** лежат исполняемые файлы (программы)

В папке **boot** лежат файлы загрузчика ОС

В папке **dev** лежат все устройства. В Linux любая аппаратная часть (процессор, видеокарта и т.п.) представлена в виде файла

В папке **etc** лежат конфигурационные файлы

В папке **media** лежат файлы монтированных устройств. Эта папка используется ОС по умолчанию

В папке **mnt** лежат файлы монтированных пользователем устройств

В папке **opt** лежат файлы, которые необходимы для работы приложений

В папке **root** лежат файлы пользователя root

В папке **run** лежат файлы приложений (служб, возможно), которые запускаются как в ручном режиме, так и в автоматическом режиме. Приложения, работающие в фоновом режиме, называются демонами. Их можно отличить по последней букве *d* в имени файла

В папке **sbin** лежат системные исполняемые файлы

В папке **snap** находятся файлы пакетного менеджера snap

В папке **tmp** находятся временные файлы. Файлы в данной папке может изменять только тот пользователь, который их создал

Папка **usr** - аналог корневой папки, но только на уровне пользователя

В папке **var** находятся изменяемые файлы приложений (например, логи)

### Приглашение оболочки

Приглашение оболочки - это информационная строка, которая отображается при открытии терминала

![invite](/img/invite.png "Приглашение оболочки")

Приглашение настраивается в файле конфигурации терминала "**.bashrc**" (/home/пользователь)

В данном файле также можно настроить алиасы (псевдонимы) для команд терминала

![term_cfg](/img/term_cfg.png "Настройки терминала")

Значок тильды (~) в терминале указывает на домашний каталог пользователя

---

## Работа с файлами (ls, pwd, cd, mkdir, cp, rm, mv, touch, cat)

Команда **ls** позволяет увидеть содержимое директории

Команда **pwd** позволяет узнать текущее местонахождение

Команда **cd** позволяет перемещаться между директориями

"**cd**" (без параметров) или "**cd ~**" возвращает в домашнюю директорию

Возврат в предыдущую директорию осуществляется командой "**cd -**"

Команда "**mkdir** tmp" (make directory) создает директорию c именем "tmp" в текущем расположении

Пакет **tree** позволяет удобно просматривать содержимое директории. Устанавливается с помощью команды "**sudo apt install tree**"

Команда "**rm**" удаляет файл или каталог. Каталог можно удалить только в том случае, если в данном каталоге ничего нет. В противном случае необходимо вызвать рекурсивное удаление с помощью команды "**rm -r имя_каталога**"

Чтобы создать структуру каталогов необходимо использовать команду "**mkdir -p дерево_каталогов**"

Особенности использования команды mv (move):
1. Если указывается более двух путей к файлам и/или каталогам, то последний путь является назначением перемещения. Например

        mv first/a_file first/a_dir second/

    В данном примере файл a_file и каталог a_dir перемещаются в каталог second. Если последний путь будет указывать на файл или несуществующий путь - возникнет ошибка

2. Если указывается два пути к файлам и/или каталогам и последний указанный путь существует, то это перемещение.
Если каталога по второму указанному пути не существует, то произойдёт переименование (т.е. перемещение в эту же директорию под другим именем)

        mv first/b_file first/b_dir # это перемещение
        mv first/b_file first/b_file_mv # это переименование
    
3. Для перемещения всех файлов из каталога необходимо использовать подстановочный символ "**\***"

        mv first/* second/ # переместить всё содержимое из first/ в second/


Команда для копирования - **cp** (copy)

При попытке скопировать всё содержимое second/ в first/ получим ошибку, которая говорит, что программа не может скопировать вложенные каталоги. Для этого необходимо использовать ключ -r (рекурсивно). Но почему так происходит

При перемещении всех вложенных объектов first/* в second/ меняется ссылка на родительский объект

![mv_scheme](/img/mv_scheme.png "Схема перемещения")

При копировании необходимо рекурсивно пересоздавать объекты (копировать все связи)

![cp_scheme](/img/cp_scheme.png "Схема копирования")

Команда **touch** используется для изменения времени последнего доступа к файлу. Если файла не существует, то создается пустой файл

Создание файлов происходит с помощью команды "**touch имя_файла**"

Команда **cat** позволяет посмотреть содержимое файла

### Символические и жесткие ссылки

Символическая ссылка - это ссылка на место объекта в файловой системе (аналог ярлыка)

Создаётся с помощью команды **ln -s имя_объекта**

Жесткая ссылка - это ссылка на место объекта в оперативной памяти (аналог ссылочного типа данных)

Создаётся с помощью команды **ln имя_объекта**

## Редакторы, пейджеры

На мой взгляд, лучше пользоваться текстовым редактором nano\)\)\)

Команда **head** выводит первые 10 строк файла. Команда **tail** выводит последние 10 строк файла

Команда **more** постепенно разворачивает файл для чтения (постранично)

Команда **less** построчно разворачивает файл